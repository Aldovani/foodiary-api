createMeal:
  handler: src/main/functions/meals/create-meal.handler
  events:
    - httpApi:
        path: /meals
        method: post
        authorizer:
          name: CognitoAuthorizer

listMealsByDay:
  handler: src/main/functions/meals/list-meals-by-day.handler
  events:
    - httpApi:
        path: /meals
        method: get
        authorizer:
          name: CognitoAuthorizer

getMealById:
  handler: src/main/functions/meals/get-meal-by-id.handler
  events:
    - httpApi:
        path: /meals/{mealId}
        method: get
        authorizer:
          name: CognitoAuthorizer

onMealFileUploaded:
  handler: src/main/functions/meals/on-meal-file-uploaded.handler
  events:
    - s3:
        bucket: !Ref MealsBucket
        event: s3:ObjectCreated:*
        existing: true
        forceDeploy: true

processMeal:
  handler: src/main/functions/meals/process-meal.handler
  memeorySize: 1024
  timeout: 120
  events:
    - sqs:
        arn: !GetAtt MealsQueue.Arn
        batchSize: 2
